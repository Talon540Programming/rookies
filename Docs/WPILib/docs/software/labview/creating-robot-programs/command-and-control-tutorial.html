<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta property="og:title" content="Command and Control Tutorial" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://docs.wpilib.org/en/stable/docs/software/labview/creating-robot-programs/command-and-control-tutorial.html" />
  <meta property="og:site_name" content="FIRST Robotics Competition Documentation" />
  <meta property="og:description" content="Introduction: Command and Control is a new LabVIEW template added for the 2016 season which organizes robot code into commands and controllers for a collection of robot-specific subsystems. Each su..." />
  <meta property="og:image" content="https://raw.githubusercontent.com/wpilibsuite/branding/main/png/wpilib-128.png" />
  <meta property="og:image:alt" content="FIRST Robotics Competition Documentation" />
  <meta property="og:ignore_canonical" content="true" />
<meta name="theme-color" content="#003974" />
<meta name="google-site-verification" content="xcmdxM0KzMYiAOeJzyF_l2Tn3AHGzPICs9_vX6q2nwM" />
<link rel="alternate" hreflang="en" href="https://docs.wpilib.org/en/stable/docs/software/labview/creating-robot-programs/command-and-control-tutorial.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.wpilib.org/en/stable/docs/software/labview/creating-robot-programs/command-and-control-tutorial.html" />
<link rel="alternate" hreflang="es" href="https://docs.wpilib.org/es/stable/docs/software/labview/creating-robot-programs/command-and-control-tutorial.html" />
<link rel="alternate" hreflang="fr" href="https://docs.wpilib.org/fr/stable/docs/software/labview/creating-robot-programs/command-and-control-tutorial.html" />
<link rel="alternate" hreflang="he" href="https://docs.wpilib.org/he/stable/docs/software/labview/creating-robot-programs/command-and-control-tutorial.html" />
<link rel="alternate" hreflang="pt" href="https://docs.wpilib.org/pt/stable/docs/software/labview/creating-robot-programs/command-and-control-tutorial.html" />
<link rel="alternate" hreflang="tr" href="https://docs.wpilib.org/tr/stable/docs/software/labview/creating-robot-programs/command-and-control-tutorial.html" />
<link rel="alternate" hreflang="zh-CN" href="https://docs.wpilib.org/zh_CN/stable/docs/software/labview/creating-robot-programs/command-and-control-tutorial.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Command and Control Tutorial &mdash; FIRST Robotics Competition  documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster.custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster.bundle.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-shadow.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-punk.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-noir.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-light.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-borderless.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/micromodal.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/frc-rtd.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/sphinx_rtd_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/FIRSTicon_RGB_withTM.ico"/>
    <link rel="canonical" href="https://docs.wpilib.org/en/stable/docs/software/labview/creating-robot-programs/command-and-control-tutorial.html" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script async="async" src="../../../../_static/js/present.js"></script>
        <script src="../../../../_static/js/hoverxref.js"></script>
        <script src="../../../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../../../_static/js/micromodal.min.js"></script>
        <script src="../../../../_static/js/versionwarning.js"></script>
        <script src="../../../../_static/js/api-docs-redirect.js"></script>
        <script src="../../../../_static/js/fix-rtd-menu-ios.js"></script>
        <script src="../../../../_static/js/external-links-new-tab.js"></script>
        <script src="../../../../_static/js/version-2014.js"></script>
        <script src="../../../../_static/tabs.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="LabVIEW Resources" href="../resources/index.html" />
    <link rel="prev" title="Tank Drive Tutorial" href="tank-drive-tutorial.html" /> 
</head>

<body class="wy-body-for-nav"> 


<div class="header-bar">
        <!-- Color Strip -->
        <div class="color-strip">
            <div class="fred"></div>
            <div class="forange"></div>
            <div class="fblue"></div>
        </div>
        <div class="link-bar-container">
            <div id="link-bar" class="collapse">
                <ul>          
                  <li id="manual-link"><a href="https://www.firstinspires.org/resource-library/frc/competition-manual-qa-system">FRC Game Manual</a></li>
                  <li id="qa-link"><a href="https://frc-qa.firstinspires.org/">FRC Game Q&A</a></li>
                </ul>
            </div>
        </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html" class="icon icon-home"> FIRST Robotics Competition
            <img src="../../../../_static/wpilibDocsLogo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                stable
              </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Zero to Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-1/index.html">Step 1: Building your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-2/index.html">Step 2: Installing Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-3/index.html">Step 3: Preparing Your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-4/index.html">Step 4: Programming your Robot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Control System Overviews</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../controls-overviews/control-system-hardware.html">Hardware Component Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../controls-overviews/control-system-software.html">Software Component Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming Basics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../what-is-wpilib.html">What is WPILib?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../yearly-overview/index.html">2022 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vscode-overview/index.html">VS Code Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dashboards/index.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">FRC LabVIEW Programming</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../zero-to-robot/step-2/labview-setup.html">Installing LabVIEW for FRC (LabVIEW only)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../zero-to-robot/step-2/frc-game-tools.html">Installing the FRC Game Tools</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Creating Robot Programs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../zero-to-robot/step-4/creating-benchtop-test-program-labview.html">Creating your Benchtop Test Program (LabVIEW)</a></li>
<li class="toctree-l3"><a class="reference internal" href="tank-drive-tutorial.html">Tank Drive Tutorial</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Command and Control Tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../resources/index.html">LabVIEW Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware-apis/index.html">Hardware APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../can-devices/index.html">CAN Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basic-programming/index.html">Basic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/support-resources.html">Support Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../frc-glossary.html">FRC Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/index.html">WPILib Java API Docs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/cpp/index.html">WPILib C++ API Docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../driverstation/index.html">Driver Station</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/robotbuilder/index.html">RobotBuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/robot-simulation/index.html">Robot Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/outlineviewer/index.html">OutlineViewer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/axon/index.html">Axon</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Programming</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../vision-processing/index.html">Vision Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../commandbased/index.html">Command-Based Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kinematics-and-odometry/index.html">Kinematics and Odometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networktables/index.html">NetworkTables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pathplanning/index.html">Path Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roborio-info/index.html">roboRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced-gradlerio/index.html">Advanced GradleRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced-controls/index.html">Advanced Controls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../convenience-features/index.html">Convenience Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples and Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples-tutorials/wpilib-examples.html">WPILib Example Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples-tutorials/third-party-examples.html">Third Party Example Projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/hardware-basics/index.html">Hardware - Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/hardware-tutorials/index.html">Hardware Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/sensors/index.html">Sensors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Romi Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../romi-robot/index.html">Getting Started with Romi</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Robot Networking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/networking-introduction/index.html">Networking Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/networking-utilities/index.html">Networking Utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/frc-docs/index.html">Contributing to frc-docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/wpilib/index.html">Developing with allwpilib</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/wpilibsuite/frc-docs/issues">Report an Issue</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">FIRST Robotics Competition</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">FRC LabVIEW Programming</a> &raquo;</li>
          <li><a href="index.html">Creating Robot Programs</a> &raquo;</li>
      <li>Command and Control Tutorial</li>
<li class="wy-breadcrumbs-aside" style="padding-inline-start: 6px;">
    <a href="?present" class="btn" style="background-color: #2980b9; color: white; padding: 5px">
        Present
        <span class="fa fa-expand"></span>
    </a>
</li>

      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/wpilibsuite/frc-docs/blob/stable/source/docs/software/labview/creating-robot-programs/command-and-control-tutorial.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="command-and-control-tutorial">
<h1>Command and Control Tutorial<a class="headerlink" href="#command-and-control-tutorial" title="Permalink to this headline"></a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline"></a></h2>
<p>Command and Control is a new LabVIEW template added for the 2016 season which organizes robot code into commands and controllers for a collection of robot-specific subsystems. Each subsystem has an independent control loop or state machine running at the appropriate rate for the mechanism and high-level commands that update desired operations and set points. This makes it very easy for autonomous code to build synchronous sequences of commands. Meanwhile, TeleOp benefits because it can use the same commands without needing to wait for completion, allowing for easy cancellation and initiation of new commands according to the drive team input. Each subsystem has a panel displaying its sensor and control values over time, and command tracing to aid in debugging.</p>
<div class="section" id="what-is-command-and-control">
<h3>What is Command and Control?<a class="headerlink" href="#what-is-command-and-control" title="Permalink to this headline"></a></h3>
<p>Command and Control recognizes that FRC® robots tend to be built up of relatively independent mechanisms such as Drive, Shooter, Arm, etc. Each of these is referred to as a subsystem and needs code that will coordinate the various sensors and actuators of the subsystem in order to complete requested commands, or actions, such as “Close Gripper” or “Lower Arm”. One of the key principles of this framework is that subsystems will each have an independent controller loop that is solely responsible for updating motors and other actuators. Code outside of the subsystem controller can issue commands which may change the robot’s output, but should not directly change any outputs. The difference is very subtle but this means that outputs can only possibly be updated from one location in the project. This speeds up debugging a robot behaving unexpectedly by giving you the ability to look through a list of commands sent to the subsystem rather than searching your project for where an output may have been modified. It also becomes easier to add an additional sensor, change gearing, or disable a mechanism without needing to modify code outside of the controller.</p>
<p>Game code, primarily consisting of Autonomous and TeleOp, will typically need to update set points and react to the state of certain mechanisms. For Autonomous, it is very common to define the robot’s operation as a  sequence of operations – drive here, pick that up, carry it there, shoot it, etc. Commands can be wired sequentially with additional logic to quickly build complex routines. For teleOp, the same commands can execute asynchronously, allowing the robot to always process the latest driver inputs, and if implemented properly, new commands will interrupt, allowing the drive team to quickly respond to field conditions while also taking advantage of automated commands and command sequences.</p>
</div>
<div class="section" id="why-should-i-use-command-and-control">
<h3>Why should I use Command and Control?<a class="headerlink" href="#why-should-i-use-command-and-control" title="Permalink to this headline"></a></h3>
<p>Command and Control adds functionality to the existing LabVIEW project templates, allowing code to scale better with more sophisticated robots and robot code. Subsystems are used to abstract the details of the implementation, and game code is built from sequences of high level command VIs. The commands themselves are VIs that can update set points, perform numerical scaling/mapping between engineering units and mechanism units, and offer synchronization options. If physical changes are made to the robot, such as changing a gearing ratio, changes can be made to just a few command Vis to reflect this change across the entire code base.</p>
<p>I/O encapsulation makes for more predictable operation and quicker debugging when resource conflicts do occur. Because each command is a VI, you are able to single step through commands or use the built in Trace functionality to view a list of all commands sent to each subsystem.The framework uses asynchronous notification and consistent data propagation making it easy to program a sequence of commands or add in simple logic to determine the correct command to run.</p>
</div>
</div>
<div class="section" id="part-1-project-explorer">
<h2>Part 1: Project Explorer<a class="headerlink" href="#part-1-project-explorer" title="Permalink to this headline"></a></h2>
<p>The Project Explorer provides organization for all of the Vis and files you will use for your robot system.  Below is a description of the major components in the Project Explorer to help with the expansion of our system.  The most frequently used items have been marked in bold.</p>
<picture><source sizes="min(min(931px, 100vw), 1000px)" srcset="../../../../_images/project-explorer-1-500.webp 500w, ../../../../_images/project-explorer-1.webp 931w" type="image/webp"/><img alt="../../../../_images/project-explorer-1.png" decoding="async" height="1630" loading="lazy" sizes="min(min(931px, 100vw), 1000px)" src="../../../../_images/project-explorer-1.png" srcset="../../../../_images/project-explorer-1-500.png 500w, ../../../../_images/project-explorer-1.png 931w" width="931"/></picture><dl>
<dt>My Computer</dt><dd><p>The items that define operation on the computer that the project was loaded on. For a robot project, this is used as a simulation target and is populated with simulation files.</p>
</dd>
<dt>Sim Support Files</dt><dd><p>The folder containing 3D CAD models and description files for the simulated robot.</p>
</dd>
<dt>Robot Simulation Readme.html</dt><dd><p>Documents the PWM channels and robot info you will need in order to write robot code that matches the wiring of the simulated robot.</p>
</dd>
<dt>Dependencies</dt><dd><p>Shows the files used by the simulated robot’s code. This will populate when you designate the code for the simulated robot target.</p>
</dd>
<dt>Build Specifications</dt><dd><p>This will contain the files that define how to build and deploy code for the simulated robot target.</p>
</dd>
<dt>Target (roboRIO-TEAM-FRC.local)</dt><dd><p>The items that define operation on the roboRIO located at (address).</p>
</dd>
<dt>Drive</dt><dd><p>The subsystem implementation and commands for the robot drive base. This serves as a custom replacement for the WPILib RobotDrive VIs.</p>
</dd>
<dt>Framework</dt><dd><p>VIs used for robot code that is not part of a subsystem that are not used very often.</p>
<dl class="simple">
<dt>Begin</dt><dd><p>Called once when robot code first starts. This is useful for initialization code that doesn’t belong to a particular subsystem.</p>
</dd>
<dt>Disabled</dt><dd><p>Called once for each disabled packet and can be used to debug sensors when you don’t want the robot to move.</p>
</dd>
<dt>Finish</dt><dd><p>During development, this may be called when robot code finishes. Not called on abort or when power is turned off.</p>
</dd>
<dt>Periodic Tasks</dt><dd><p>A good place for ad hoc periodic loops for debugging or monitoring</p>
</dd>
<dt>Robot Global Data</dt><dd><p>Useful for sharing robot information that doesn’t belong to a subsystem.</p>
</dd>
</dl>
</dd>
<dt>Support Code</dt><dd><p>Debugging and code development aids.</p>
</dd>
<dt>Vision</dt><dd><p>Subsystem and commands for the camera and image processing.</p>
</dd>
<dt>Robot Main.vi</dt><dd><p>Top level VI that you will run while developing code.</p>
</dd>
<dt>Autonomous.vi</dt><dd><p>VI that runs during autonomous period.</p>
</dd>
<dt>Teleop.vi</dt><dd><p>VI that is called for each TeleOp packet.</p>
</dd>
<dt>Test.vi</dt><dd><p>VI that runs when driver station is in test mode.</p>
</dd>
<dt>SubSystems.vi</dt><dd><p>VI that contains and starts all subsystems.</p>
</dd>
<dt>Dependencies</dt><dd><p>Shows the files used by the robot code.</p>
</dd>
<dt>Build Specifications</dt><dd><p>Used to build and run the code as a startup application once code works correctly.</p>
</dd>
</dl>
<picture><source sizes="min(min(907px, 100vw), 1000px)" srcset="../../../../_images/project-explorer-2-500.webp 500w, ../../../../_images/project-explorer-2.webp 907w" type="image/webp"/><img alt="../../../../_images/project-explorer-2.jpg" decoding="async" height="621" loading="lazy" sizes="min(min(907px, 100vw), 1000px)" src="../../../../_images/project-explorer-2.jpg" srcset="../../../../_images/project-explorer-2-500.jpg 500w, ../../../../_images/project-explorer-2.jpg 907w" width="907"/></picture></div>
<div class="section" id="drive-subsystem-project-explorer">
<h2>Drive Subsystem Project Explorer<a class="headerlink" href="#drive-subsystem-project-explorer" title="Permalink to this headline"></a></h2>
<picture><source sizes="min(min(523px, 100vw), 1000px)" srcset="../../../../_images/drive-subsystem-project-explorer.webp 523w" type="image/webp"/><img alt="../../../../_images/drive-subsystem-project-explorer.jpg" decoding="async" height="513" loading="lazy" sizes="min(min(523px, 100vw), 1000px)" src="../../../../_images/drive-subsystem-project-explorer.jpg" srcset="../../../../_images/drive-subsystem-project-explorer.jpg 523w" width="523"/></picture><dl class="simple">
<dt>Commands:</dt><dd><p>This folder contains the command VIs that request the controller carry out an operation. It also contains templates for creating additional drive commands.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After creating a new command, you may need to edit <code class="docutils literal notranslate"><span class="pre">Drive</span> <span class="pre">Setpoints.ctl</span></code> to add or update fields that controller uses to define the new operation. You also need to go into the Drive Controller.vi and modify the case structure to add a case for every value.</p>
</div>
<div class="section" id="implementation">
<h3>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline"></a></h3>
<p>These are the VIs and Controls used to build the subsystem.</p>
<dl class="simple">
<dt>Infrastructure VIs</dt><dd><ul class="simple">
<li><p>Drive Check for New Command: It is called each iteration of the controller loop. It checks for new commands, updates timing data, and upon completion notifies a waiting command.</p></li>
<li><p>Drive Command Helper.vi: Commands call this VI to notify the controller that a new command has been issued.</p></li>
<li><p>Drive Controller Initialization.vi: It allocates the notifier and combines the timing, default command, and other information into a single data wire.</p></li>
</ul>
</dd>
</dl>
<ul class="simple">
<li><p>Drive Controller.vi: This VI contains the control/state machine loop. The panel may also contain displays useful for debugging.</p></li>
<li><p>Drive Operation.ctl: This typedef defines the operational modes of the controller. Many commands can share an operation.</p></li>
<li><p>Drive Setpoint.ctl: It contains the data fields used by all operating modes of the Drive subsystem.</p></li>
<li><p>Drive Published Globals.vi: A useful place for publishing global information about the drive subsystem.</p></li>
</ul>
</div>
</div>
<div class="section" id="part-2-initializing-the-drive-subsystem">
<h2>Part 2: Initializing the Drive Subsystem<a class="headerlink" href="#part-2-initializing-the-drive-subsystem" title="Permalink to this headline"></a></h2>
<p>There are green comments on the controller’s block diagram that point out key areas that you will want to know how to edit.</p>
<p>The area to the left of the control loop will execute once when the subsystem starts up. This is where you will typically allocate and initialize all I/O and state data. You may publish the I/O refnums, or you may register them for Test Mode Only to keep them private so that other code cannot update motors without using a command.</p>
<picture><source sizes="min(min(1452px, 100vw), 1000px)" srcset="../../../../_images/step-1-500.webp 500w, ../../../../_images/step-1-800.webp 800w, ../../../../_images/step-1-1100.webp 1100w, ../../../../_images/step-1.webp 1452w" type="image/webp"/><img alt="../../../../_images/step-1.jpg" decoding="async" height="625" loading="lazy" sizes="min(min(1452px, 100vw), 1000px)" src="../../../../_images/step-1.jpg" srcset="../../../../_images/step-1-500.jpg 500w, ../../../../_images/step-1-800.jpg 800w, ../../../../_images/step-1-1100.jpg 1100w, ../../../../_images/step-1.jpg 1452w" width="1452"/></picture><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Initializing the resources for each subsystem in their respective Controller.vi rather than in Begin.vi improves I/O encapsulation, reducing potential resource conflicts and simplifies debugging.</p>
</div>
<picture><source sizes="min(min(874px, 100vw), 1000px)" srcset="../../../../_images/step-2-500.webp 500w, ../../../../_images/step-2.webp 874w" type="image/webp"/><img alt="../../../../_images/step-2.jpg" decoding="async" height="591" loading="lazy" sizes="min(min(874px, 100vw), 1000px)" src="../../../../_images/step-2.jpg" srcset="../../../../_images/step-2-500.jpg 500w, ../../../../_images/step-2.jpg 874w" width="874"/></picture><p>Part of the initialization is to select the default operation and set point values when no other operation is being processed.</p>
<picture><source sizes="min(min(742px, 100vw), 1000px)" srcset="../../../../_images/step-3-500.webp 500w, ../../../../_images/step-3.webp 742w" type="image/webp"/><img alt="../../../../_images/step-3.jpg" decoding="async" height="654" loading="lazy" sizes="min(min(742px, 100vw), 1000px)" src="../../../../_images/step-3.jpg" srcset="../../../../_images/step-3-500.jpg 500w, ../../../../_images/step-3.jpg 742w" width="742"/></picture><p>Inside the control loop is a case statement where operations are actually implemented. Set point values, iteration delay, iteration count, and sensors can all have influence on how the subsystem operates.  This case structure has a value for each operation state of the subsystem.</p>
<picture><source sizes="min(min(759px, 100vw), 1000px)" srcset="../../../../_images/step-4-500.webp 500w, ../../../../_images/step-4.webp 759w" type="image/webp"/><img alt="../../../../_images/step-4.jpg" decoding="async" height="652" loading="lazy" sizes="min(min(759px, 100vw), 1000px)" src="../../../../_images/step-4.jpg" srcset="../../../../_images/step-4-500.jpg 500w, ../../../../_images/step-4.jpg 759w" width="759"/></picture><p>Each iteration of the controller loop will optionally update the Trace VI. The framework already incorporates the subsystem name, operation, and description, and you may find it helpful to format additional set point values into the trace information. Open the Trace VI and click Enable while the robot code is running to current setpoints and commands sent to each subsystem.</p>
<p>The primary goal of the controller is to update actuators for the subsystem. This can occur within the case structure, but many times, it is beneficial to do it downstream of the structure to ensure that values are always updated with the correct value and in only one location in the code.</p>
<picture><source sizes="min(min(1030px, 100vw), 1000px)" srcset="../../../../_images/step-5-500.webp 500w, ../../../../_images/step-5-800.webp 800w, ../../../../_images/step-5.webp 1030w" type="image/webp"/><img alt="../../../../_images/step-5.jpg" decoding="async" height="342" loading="lazy" sizes="min(min(1030px, 100vw), 1000px)" src="../../../../_images/step-5.jpg" srcset="../../../../_images/step-5-500.jpg 500w, ../../../../_images/step-5-800.jpg 800w, ../../../../_images/step-5.jpg 1030w" width="1030"/></picture></div>
<div class="section" id="part-3-drive-subsystem-shipped-commands">
<h2>Part 3: Drive Subsystem Shipped Commands<a class="headerlink" href="#part-3-drive-subsystem-shipped-commands" title="Permalink to this headline"></a></h2>
<p>There are 3 shipped example commands for each new subsystem:</p>
<div class="section" id="drive-for-time-vi">
<h3>Drive For Time.vi<a class="headerlink" href="#drive-for-time-vi" title="Permalink to this headline"></a></h3>
<picture><source sizes="min(min(52px, 100vw), 1000px)" srcset="../../../../_images/drive-for-time.webp 52w" type="image/webp"/><img alt="../../../../_images/drive-for-time.jpg" decoding="async" height="53" loading="lazy" sizes="min(min(52px, 100vw), 1000px)" src="../../../../_images/drive-for-time.jpg" srcset="../../../../_images/drive-for-time.jpg 52w" width="52"/></picture><p>This VI sets the motors to run for a given number of seconds. It optionally synchronizes with the completion of the command.</p>
<p>The Drive for Time case will operate the motors at the set point until the timer elapses or a new command is issued. If the motors have the safety timeout enabled, it is necessary to update the motors at least once every 100ms. This is why the code waits for the smaller of the remaining time and 50ms.</p>
<picture><source sizes="min(min(928px, 100vw), 1000px)" srcset="../../../../_images/drive-for-time-diogram-500.webp 500w, ../../../../_images/drive-for-time-diogram.webp 928w" type="image/webp"/><img alt="../../../../_images/drive-for-time-diogram.jpg" decoding="async" height="449" loading="lazy" sizes="min(min(928px, 100vw), 1000px)" src="../../../../_images/drive-for-time-diogram.jpg" srcset="../../../../_images/drive-for-time-diogram-500.jpg 500w, ../../../../_images/drive-for-time-diogram.jpg 928w" width="928"/></picture></div>
<div class="section" id="drive-immediate-vi">
<h3>Drive Immediate.vi<a class="headerlink" href="#drive-immediate-vi" title="Permalink to this headline"></a></h3>
<picture><source sizes="min(min(52px, 100vw), 1000px)" srcset="../../../../_images/drive-immediate.webp 52w" type="image/webp"/><img alt="../../../../_images/drive-immediate.jpg" decoding="async" height="54" loading="lazy" sizes="min(min(52px, 100vw), 1000px)" src="../../../../_images/drive-immediate.jpg" srcset="../../../../_images/drive-immediate.jpg 52w" width="52"/></picture><p>Gets the desired left and right speeds for the motors and will set the motors immediately to those set points.</p>
<p>The Immediate case updates the motors to the set point defined by the command. The command is not considered finished since you want the motors to maintain this value until a new command comes in or until a timeout value. The timeout is useful anytime a command includes a dead band. Small values will not be requested if smaller than the dead band, and will result in growling or creeping unless the command times out.</p>
<picture><source sizes="min(min(1188px, 100vw), 1000px)" srcset="../../../../_images/drive-immediate-diogram-500.webp 500w, ../../../../_images/drive-immediate-diogram-800.webp 800w, ../../../../_images/drive-immediate-diogram.webp 1188w" type="image/webp"/><img alt="../../../../_images/drive-immediate-diogram.jpg" decoding="async" height="594" loading="lazy" sizes="min(min(1188px, 100vw), 1000px)" src="../../../../_images/drive-immediate-diogram.jpg" srcset="../../../../_images/drive-immediate-diogram-500.jpg 500w, ../../../../_images/drive-immediate-diogram-800.jpg 800w, ../../../../_images/drive-immediate-diogram.jpg 1188w" width="1188"/></picture></div>
<div class="section" id="stop-driving-vi">
<h3>Stop Driving.vi<a class="headerlink" href="#stop-driving-vi" title="Permalink to this headline"></a></h3>
<picture><source sizes="min(min(47px, 100vw), 1000px)" srcset="../../../../_images/stop-driving.webp 47w" type="image/webp"/><img alt="../../../../_images/stop-driving.jpg" decoding="async" height="48" loading="lazy" sizes="min(min(47px, 100vw), 1000px)" src="../../../../_images/stop-driving.jpg" srcset="../../../../_images/stop-driving.jpg 47w" width="47"/></picture><p>Zero the drive motors, making the robot stationary.</p>
<p>The Reserve command turns off the motors and waits for a new command. When used with a named command sequence, reserve identifies that the drive subsystem is part of a sequence, even if not currently moving the robot. This helps to arbitrate subsystem resource between simultaneously running commands.</p>
<picture><source sizes="min(min(929px, 100vw), 1000px)" srcset="../../../../_images/stop-driving-diogram-500.webp 500w, ../../../../_images/stop-driving-diogram.webp 929w" type="image/webp"/><img alt="../../../../_images/stop-driving-diogram.jpg" decoding="async" height="453" loading="lazy" sizes="min(min(929px, 100vw), 1000px)" src="../../../../_images/stop-driving-diogram.jpg" srcset="../../../../_images/stop-driving-diogram-500.jpg 500w, ../../../../_images/stop-driving-diogram.jpg 929w" width="929"/></picture></div>
</div>
<div class="section" id="part-4-creating-new-commands">
<h2>Part 4: Creating New Commands<a class="headerlink" href="#part-4-creating-new-commands" title="Permalink to this headline"></a></h2>
<p>The Command and Control framework allows users to easily create new commands for a subsystem. To Create a new command open the subsystem folder/Commands In the project explorer window, choose one of the VI Templates to use as the starting point of your new command, right click, and select New From Template.</p>
<ul class="simple">
<li><p><strong>Immediate</strong>: This VI notifies the subsystem about the new setpoint.</p></li>
<li><p><strong>Immediate with deadband</strong>: This VI compares the input value to the deadband and optionally notifies the subsystem about the new setpoint. This is very useful when joystick continuous values are being used.</p></li>
<li><p><strong>With duration</strong>: This VI notifies the subsystem to perform this command for the given duration, and then return to the default state. Synchronization determines whether this VI Starts the operation and returns immediately, or waits for the operation to complete. The first option is commonly used for TeleOp, and the second for Autonomous sequencing.</p></li>
</ul>
<p>In this example we will add the new command “Drive for Distance”.</p>
<picture><source sizes="min(min(800px, 100vw), 1000px)" srcset="../../../../_images/new-vi-500.webp 500w, ../../../../_images/new-vi.webp 800w" type="image/webp"/><img alt="../../../../_images/new-vi.jpg" decoding="async" height="1086" loading="lazy" sizes="min(min(800px, 100vw), 1000px)" src="../../../../_images/new-vi.jpg" srcset="../../../../_images/new-vi-500.jpg 500w, ../../../../_images/new-vi.jpg 800w" width="800"/></picture><p>First, save the new VI with a descriptive name such as “Drive for Distance”. Next, determine whether the new command needs a new value added the Drive Operations enum typedef. The initial project code already has an enum value of Drive for Distance, but the following image shows how you would add one if needed.</p>
<picture><source sizes="min(min(655px, 100vw), 1000px)" srcset="../../../../_images/edit-items-500.webp 500w, ../../../../_images/edit-items.webp 655w" type="image/webp"/><img alt="../../../../_images/edit-items.jpg" decoding="async" height="796" loading="lazy" sizes="min(min(655px, 100vw), 1000px)" src="../../../../_images/edit-items.jpg" srcset="../../../../_images/edit-items-500.jpg 500w, ../../../../_images/edit-items.jpg 655w" width="655"/></picture><p>If a command needs additional information to execute, add it to the setpoints control. By default, the Drive subsystem has fields for the Left Setpoint, Right Setpoint, and Duration along with the operation to be executed. The Drive for Distance command could reuse Duration as distance, but let’s go ahead and add a numeric control to the Drive Setpoints.ctl called Distance (feet).</p>
<picture><source sizes="min(min(593px, 100vw), 1000px)" srcset="../../../../_images/add-distance.webp 593w" type="image/webp"/><img alt="../../../../_images/add-distance.jpg" decoding="async" height="612" loading="lazy" sizes="min(min(593px, 100vw), 1000px)" src="../../../../_images/add-distance.jpg" srcset="../../../../_images/add-distance.jpg 593w" width="593"/></picture><p>Once that we have all of the fields needed to specify our command, we can modify the newly created Drive for Distance.vi. As shown below, select Drive for Distance from the enum’s drop down menu and add a VI parameters to specify distance, speeds, etc. If the units do not match, the command VI is a great place to map between units.</p>
<picture><source sizes="min(min(1007px, 100vw), 1000px)" srcset="../../../../_images/add-vi-parameters-500.webp 500w, ../../../../_images/add-vi-parameters-800.webp 800w, ../../../../_images/add-vi-parameters.webp 1007w" type="image/webp"/><img alt="../../../../_images/add-vi-parameters.jpg" decoding="async" height="807" loading="lazy" sizes="min(min(1007px, 100vw), 1000px)" src="../../../../_images/add-vi-parameters.jpg" srcset="../../../../_images/add-vi-parameters-500.jpg 500w, ../../../../_images/add-vi-parameters-800.jpg 800w, ../../../../_images/add-vi-parameters.jpg 1007w" width="1007"/></picture><p>Next, add code to the Drive Controller to define what happens when the Drive for Distance command executes. Right click on the Case Structure and Duplicate or Add Case for Every Value. This will create a new “Drive for Distance” case.</p>
<picture><source sizes="min(min(1870px, 100vw), 1000px)" srcset="../../../../_images/add-case-500.webp 500w, ../../../../_images/add-case-800.webp 800w, ../../../../_images/add-case-1100.webp 1100w, ../../../../_images/add-case-1400.webp 1400w, ../../../../_images/add-case-1700.webp 1700w, ../../../../_images/add-case.webp 1870w" type="image/webp"/><img alt="../../../../_images/add-case.jpg" decoding="async" height="787" loading="lazy" sizes="min(min(1870px, 100vw), 1000px)" src="../../../../_images/add-case.jpg" srcset="../../../../_images/add-case-500.jpg 500w, ../../../../_images/add-case-800.jpg 800w, ../../../../_images/add-case-1100.jpg 1100w, ../../../../_images/add-case-1400.jpg 1400w, ../../../../_images/add-case-1700.jpg 1700w, ../../../../_images/add-case.jpg 1870w" width="1870"/></picture><p>In order to access new setpoint fields, grow the “Access Cmd setpoints” unbundle node. Open your encoder(s) on the outside, to the left of the loop. In the new diagram of the case structure, we added a call to reset the encoder on the first loop iteration and read it otherwise. There is also some simple code that compares encoder values and updates the motor power. If new controls are added to the setpoints cluster, you should also consider adding them to the Trace. The necessary changes are shown in the image below.</p>
<picture><source sizes="min(min(1695px, 100vw), 1000px)" srcset="../../../../_images/add-encoder-logic-500.webp 500w, ../../../../_images/add-encoder-logic-800.webp 800w, ../../../../_images/add-encoder-logic-1100.webp 1100w, ../../../../_images/add-encoder-logic-1400.webp 1400w, ../../../../_images/add-encoder-logic.webp 1695w" type="image/webp"/><img alt="../../../../_images/add-encoder-logic.jpg" decoding="async" height="798" loading="lazy" sizes="min(min(1695px, 100vw), 1000px)" src="../../../../_images/add-encoder-logic.jpg" srcset="../../../../_images/add-encoder-logic-500.jpg 500w, ../../../../_images/add-encoder-logic-800.jpg 800w, ../../../../_images/add-encoder-logic-1100.jpg 1100w, ../../../../_images/add-encoder-logic-1400.jpg 1400w, ../../../../_images/add-encoder-logic.jpg 1695w" width="1695"/></picture></div>
<div class="section" id="part-5-creating-a-subsystem">
<h2>Part 5: Creating a Subsystem<a class="headerlink" href="#part-5-creating-a-subsystem" title="Permalink to this headline"></a></h2>
<p>In order to create a new subsystem, right click on the roboRIO target and select New» Subsystem. In the pop up dialog box, enter the name of the subsystem, list the operational modes, and specify the color of the icon.</p>
<picture><source sizes="min(min(820px, 100vw), 1000px)" srcset="../../../../_images/new-subsystem-500.webp 500w, ../../../../_images/new-subsystem.webp 820w" type="image/webp"/><img alt="../../../../_images/new-subsystem.jpg" decoding="async" height="847" loading="lazy" sizes="min(min(820px, 100vw), 1000px)" src="../../../../_images/new-subsystem.jpg" srcset="../../../../_images/new-subsystem-500.jpg 500w, ../../../../_images/new-subsystem.jpg 820w" width="820"/></picture><p>When you click OK, the subsystem folder will be generated and added to the project disk folder and tree. It will contain a base implementation of the VIs and controls that make up a subsystem. A call to the new controller will be inserted into the Subsystems VI. The controller VI will open, ready for you to add I/O and implement state machine or control code. Generated VI icons will use the color and name provided in the dialog. The generated code will use typedefs for set point fields and operations.</p>
<picture><source sizes="min(min(1350px, 100vw), 1000px)" srcset="../../../../_images/new-subsystem-front-panel-500.webp 500w, ../../../../_images/new-subsystem-front-panel-800.webp 800w, ../../../../_images/new-subsystem-front-panel-1100.webp 1100w, ../../../../_images/new-subsystem-front-panel.webp 1350w" type="image/webp"/><img alt="../../../../_images/new-subsystem-front-panel.jpg" decoding="async" height="886" loading="lazy" sizes="min(min(1350px, 100vw), 1000px)" src="../../../../_images/new-subsystem-front-panel.jpg" srcset="../../../../_images/new-subsystem-front-panel-500.jpg 500w, ../../../../_images/new-subsystem-front-panel-800.jpg 800w, ../../../../_images/new-subsystem-front-panel-1100.jpg 1100w, ../../../../_images/new-subsystem-front-panel.jpg 1350w" width="1350"/></picture><p>Below is the block diagram of the newly created subsystem. This code will be generated automatically when you create the subsystem.</p>
<picture><source sizes="min(min(1890px, 100vw), 1000px)" srcset="../../../../_images/new-subsystem-diogram-500.webp 500w, ../../../../_images/new-subsystem-diogram-800.webp 800w, ../../../../_images/new-subsystem-diogram-1100.webp 1100w, ../../../../_images/new-subsystem-diogram-1400.webp 1400w, ../../../../_images/new-subsystem-diogram-1700.webp 1700w, ../../../../_images/new-subsystem-diogram.webp 1890w" type="image/webp"/><img alt="../../../../_images/new-subsystem-diogram.jpg" decoding="async" height="834" loading="lazy" sizes="min(min(1890px, 100vw), 1000px)" src="../../../../_images/new-subsystem-diogram.jpg" srcset="../../../../_images/new-subsystem-diogram-500.jpg 500w, ../../../../_images/new-subsystem-diogram-800.jpg 800w, ../../../../_images/new-subsystem-diogram-1100.jpg 1100w, ../../../../_images/new-subsystem-diogram-1400.jpg 1400w, ../../../../_images/new-subsystem-diogram-1700.jpg 1700w, ../../../../_images/new-subsystem-diogram.jpg 1890w" width="1890"/></picture></div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tank-drive-tutorial.html" class="btn btn-neutral float-left" title="Tank Drive Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../resources/index.html" class="btn btn-neutral float-right" title="LabVIEW Resources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, FIRST and other WPILib Contributors.
      <span class="commit">Revision <code>30e056cb</code>.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: stable
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/2021/">2021</a></dd>
        
          <dd><a href="/en/2020/">2020</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/stable/pdf/">pdf</a></dd>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/stable/htmlzip/">html</a></dd>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/frc-docs/?fromdocs=frc-docs">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/frc-docs/?fromdocs=frc-docs">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>
  <script>
    if (typeof READTHEDOCS_DATA !== 'undefined') {
        if (!READTHEDOCS_DATA.features) {
          READTHEDOCS_DATA.features = {};
        }
        READTHEDOCS_DATA.features.docsearch_disabled = false;
      }
    </script>

</body>
</html>