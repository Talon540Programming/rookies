<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta property="og:title" content="Viewing Diagnostics" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://docs.wpilib.org/en/stable/docs/software/pathplanning/system-identification/viewing-diagnostics.html" />
  <meta property="og:site_name" content="FIRST Robotics Competition Documentation" />
  <meta property="og:description" content="Goodness-of-Fit Metrics: There are three numerical accuracy metrics that are computed with this tool: acceleration r-squared, simulated velocity r-squared, and standard deviation of the simulated v..." />
  <meta property="og:image" content="https://raw.githubusercontent.com/wpilibsuite/branding/main/png/wpilib-128.png" />
  <meta property="og:image:alt" content="FIRST Robotics Competition Documentation" />
  <meta property="og:ignore_canonical" content="true" />
<meta name="theme-color" content="#003974" />
<meta name="google-site-verification" content="xcmdxM0KzMYiAOeJzyF_l2Tn3AHGzPICs9_vX6q2nwM" />
<link rel="alternate" hreflang="en" href="https://docs.wpilib.org/en/stable/docs/software/pathplanning/system-identification/viewing-diagnostics.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.wpilib.org/en/stable/docs/software/pathplanning/system-identification/viewing-diagnostics.html" />
<link rel="alternate" hreflang="es" href="https://docs.wpilib.org/es/stable/docs/software/pathplanning/system-identification/viewing-diagnostics.html" />
<link rel="alternate" hreflang="fr" href="https://docs.wpilib.org/fr/stable/docs/software/pathplanning/system-identification/viewing-diagnostics.html" />
<link rel="alternate" hreflang="he" href="https://docs.wpilib.org/he/stable/docs/software/pathplanning/system-identification/viewing-diagnostics.html" />
<link rel="alternate" hreflang="pt" href="https://docs.wpilib.org/pt/stable/docs/software/pathplanning/system-identification/viewing-diagnostics.html" />
<link rel="alternate" hreflang="tr" href="https://docs.wpilib.org/tr/stable/docs/software/pathplanning/system-identification/viewing-diagnostics.html" />
<link rel="alternate" hreflang="zh-CN" href="https://docs.wpilib.org/zh_CN/stable/docs/software/pathplanning/system-identification/viewing-diagnostics.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Viewing Diagnostics &mdash; FIRST Robotics Competition  documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster.custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster.bundle.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-shadow.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-punk.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-noir.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-light.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-borderless.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/micromodal.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/frc-rtd.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/sphinx_rtd_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/FIRSTicon_RGB_withTM.ico"/>
    <link rel="canonical" href="https://docs.wpilib.org/en/stable/docs/software/pathplanning/system-identification/viewing-diagnostics.html" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script async="async" src="../../../../_static/js/present.js"></script>
        <script src="../../../../_static/js/hoverxref.js"></script>
        <script src="../../../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../../../_static/js/micromodal.min.js"></script>
        <script src="../../../../_static/js/versionwarning.js"></script>
        <script src="../../../../_static/js/api-docs-redirect.js"></script>
        <script src="../../../../_static/js/fix-rtd-menu-ios.js"></script>
        <script src="../../../../_static/js/external-links-new-tab.js"></script>
        <script src="../../../../_static/js/version-2014.js"></script>
        <script src="../../../../_static/tabs.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Feedback Analysis" href="analyzing-feedback.html" />
    <link rel="prev" title="Analyzing Data" href="analyzing-data.html" /> 
</head>

<body class="wy-body-for-nav"> 


<div class="header-bar">
        <!-- Color Strip -->
        <div class="color-strip">
            <div class="fred"></div>
            <div class="forange"></div>
            <div class="fblue"></div>
        </div>
        <div class="link-bar-container">
            <div id="link-bar" class="collapse">
                <ul>          
                  <li id="manual-link"><a href="https://www.firstinspires.org/resource-library/frc/competition-manual-qa-system">FRC Game Manual</a></li>
                  <li id="qa-link"><a href="https://frc-qa.firstinspires.org/">FRC Game Q&A</a></li>
                </ul>
            </div>
        </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html" class="icon icon-home"> FIRST Robotics Competition
            <img src="../../../../_static/wpilibDocsLogo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                stable
              </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Zero to Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-1/index.html">Step 1: Building your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-2/index.html">Step 2: Installing Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-3/index.html">Step 3: Preparing Your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-4/index.html">Step 4: Programming your Robot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Control System Overviews</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../controls-overviews/control-system-hardware.html">Hardware Component Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../controls-overviews/control-system-software.html">Software Component Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../what-is-wpilib.html">What is WPILib?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../yearly-overview/index.html">2022 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vscode-overview/index.html">VS Code Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dashboards/index.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labview/index.html">FRC LabVIEW Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware-apis/index.html">Hardware APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../can-devices/index.html">CAN Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basic-programming/index.html">Basic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/support-resources.html">Support Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../frc-glossary.html">FRC Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/index.html">WPILib Java API Docs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/cpp/index.html">WPILib C++ API Docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../driverstation/index.html">Driver Station</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/robotbuilder/index.html">RobotBuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/robot-simulation/index.html">Robot Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/outlineviewer/index.html">OutlineViewer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/axon/index.html">Axon</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Programming</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../vision-processing/index.html">Vision Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../commandbased/index.html">Command-Based Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kinematics-and-odometry/index.html">Kinematics and Odometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networktables/index.html">NetworkTables</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Path Planning</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">System Identification</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">Introduction to System Identification</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuring-project.html">Configuring a Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="identification-routine.html">Running the Identification Routine</a></li>
<li class="toctree-l3"><a class="reference internal" href="analyzing-data.html">Analyzing Data</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Viewing Diagnostics</a></li>
<li class="toctree-l3"><a class="reference internal" href="analyzing-feedback.html">Feedback Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="additional-utils.html">Additional Utilities and Tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../trajectory-tutorial/index.html">Trajectory Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pathweaver/index.html">PathWeaver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../roborio-info/index.html">roboRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced-gradlerio/index.html">Advanced GradleRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced-controls/index.html">Advanced Controls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../convenience-features/index.html">Convenience Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples and Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples-tutorials/wpilib-examples.html">WPILib Example Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples-tutorials/third-party-examples.html">Third Party Example Projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/hardware-basics/index.html">Hardware - Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/hardware-tutorials/index.html">Hardware Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/sensors/index.html">Sensors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Romi Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../romi-robot/index.html">Getting Started with Romi</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Robot Networking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/networking-introduction/index.html">Networking Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/networking-utilities/index.html">Networking Utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/frc-docs/index.html">Contributing to frc-docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/wpilib/index.html">Developing with allwpilib</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/wpilibsuite/frc-docs/issues">Report an Issue</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">FIRST Robotics Competition</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Path Planning</a> &raquo;</li>
          <li><a href="index.html">System Identification</a> &raquo;</li>
      <li>Viewing Diagnostics</li>
<li class="wy-breadcrumbs-aside" style="padding-inline-start: 6px;">
    <a href="?present" class="btn" style="background-color: #2980b9; color: white; padding: 5px">
        Present
        <span class="fa fa-expand"></span>
    </a>
</li>

      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/wpilibsuite/frc-docs/blob/stable/source/docs/software/pathplanning/system-identification/viewing-diagnostics.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="viewing-diagnostics">
<h1>Viewing Diagnostics<a class="headerlink" href="#viewing-diagnostics" title="Permalink to this headline"></a></h1>
<div class="section" id="goodness-of-fit-metrics">
<h2>Goodness-of-Fit Metrics<a class="headerlink" href="#goodness-of-fit-metrics" title="Permalink to this headline"></a></h2>
<p>There are three numerical accuracy metrics that are computed with this tool: acceleration r-squared, simulated velocity r-squared, and standard deviation of the simulated velocity error.</p>
<picture><source sizes="min(min(1575px, 100vw), 1000px)" srcset="../../../../_images/viewing-metrics-500.webp 500w, ../../../../_images/viewing-metrics-800.webp 800w, ../../../../_images/viewing-metrics-1100.webp 1100w, ../../../../_images/viewing-metrics-1400.webp 1400w, ../../../../_images/viewing-metrics.webp 1575w" type="image/webp"/><img alt="Analysis accuracy metrics" decoding="async" height="752" loading="lazy" sizes="min(min(1575px, 100vw), 1000px)" src="../../../../_images/viewing-metrics.png" srcset="../../../../_images/viewing-metrics-500.png 500w, ../../../../_images/viewing-metrics-800.png 800w, ../../../../_images/viewing-metrics-1100.png 1100w, ../../../../_images/viewing-metrics-1400.png 1400w, ../../../../_images/viewing-metrics.png 1575w" width="1575"/></picture><p>The <a class="reference external" href="https://en.wikipedia.org/wiki/Coefficient_of_determination">r-squared</a> metric refers to the goodness of fit of the tool’s <a class="reference external" href="https://en.wikipedia.org/wiki/Ordinary_least_squares">OLS (Ordinary Least Squares) fit</a>.  The <a class="reference external" href="https://en.wikipedia.org/wiki/Root-mean-square_deviation">RMSE (Root Mean Squared Error)</a> is the error (in the measured units) between the collected velocities and the predicted velocities from a simulation based on the feedforward gains.</p>
<p>The acceleration r-squared is the fraction of the variance in measured acceleration (used as the independent variable in the SysId regression) explained by the linear model.  This can be quite variable variable, because acceleration is very susceptible to system noise.  Assuming the other fit metrics are acceptable, values near <code class="docutils literal notranslate"><span class="pre">1</span></code> indicate an “ideal” mechanism with few disturbances, while values near <code class="docutils literal notranslate"><span class="pre">0</span></code> indicate a noisy mechanism with substantial physical vibrations/losses.</p>
<p>The simulated velocity r-squared is the fraction of the variance in measured velocity explained by a noiseless simulation of the motor movement stepped forward with the constants determined from the regression.  A value north of <code class="docutils literal notranslate"><span class="pre">.9</span></code> indicates a good fit.</p>
<p>The simulated velocity RMSE is the standard deviation of the velocity error from the simulated model.  This is a good estimation of the amount of process noise present during the test routine, and can be used as a low-end estimate for the model noise term in <a class="reference internal" href="../../advanced-controls/state-space/state-space-intro.html#introduction-to-state-space-control"><span class="std std-ref">state-space control</span></a>.</p>
</div>
<div class="section" id="diagnostic-plots">
<h2>Diagnostic Plots<a class="headerlink" href="#diagnostic-plots" title="Permalink to this headline"></a></h2>
<p>SysId also produces several diagnostic plots to help users evaluate the quality of their model fit.</p>
<picture><source sizes="min(min(1575px, 100vw), 1000px)" srcset="../../../../_images/plot-view-500.webp 500w, ../../../../_images/plot-view-800.webp 800w, ../../../../_images/plot-view-1100.webp 1100w, ../../../../_images/plot-view-1400.webp 1400w, ../../../../_images/plot-view.webp 1575w" type="image/webp"/><img alt="Diagnostic plot location" decoding="async" height="752" loading="lazy" sizes="min(min(1575px, 100vw), 1000px)" src="../../../../_images/plot-view.png" srcset="../../../../_images/plot-view-500.png 500w, ../../../../_images/plot-view-800.png 800w, ../../../../_images/plot-view-1100.png 1100w, ../../../../_images/plot-view-1400.png 1400w, ../../../../_images/plot-view.png 1575w" width="1575"/></picture><div class="section" id="time-domain-plots">
<h3>Time-Domain Plots<a class="headerlink" href="#time-domain-plots" title="Permalink to this headline"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To improve plot quality, the diagnostic plots are separated by direction.  Be sure to view both the forward <em>and</em> backward plots when troubleshooting!</p>
</div>
<p>The Time-Domain Diagnostics plots display velocity versus time over the course of the analyzed tests. These should look something like this:</p>
<picture><source sizes="min(min(1575px, 100vw), 1000px)" srcset="../../../../_images/time-domain-plots-500.webp 500w, ../../../../_images/time-domain-plots-800.webp 800w, ../../../../_images/time-domain-plots-1100.webp 1100w, ../../../../_images/time-domain-plots-1400.webp 1400w, ../../../../_images/time-domain-plots.webp 1575w" type="image/webp"/><img alt="Picture of the time domain plots" decoding="async" height="735" loading="lazy" sizes="min(min(1575px, 100vw), 1000px)" src="../../../../_images/time-domain-plots.png" srcset="../../../../_images/time-domain-plots-500.png 500w, ../../../../_images/time-domain-plots-800.png 800w, ../../../../_images/time-domain-plots-1100.png 1100w, ../../../../_images/time-domain-plots-1400.png 1400w, ../../../../_images/time-domain-plots.png 1575w" width="1575"/></picture><p>The velocity time domain plots contain three sets of data: Raw Data, Filtered Data, and Simulation. The Raw Data is the recorded data from your robot, the Filtered Data is the data after a median filter has been applied to the data, and the Simulation represents the velocity predictions of a model based off of the feedforward gains from the tool (these are used to calculate the “sim” error metrics mentioned above).</p>
<p>A successful quasistatic graph will be very nearly linear, while a successful dynamic graph will be an approximately exponential approach of the steady-speed.</p>
<p>Deviation from this behavior is a sign of an <a class="reference internal" href="#common-failure-modes"><span class="std std-ref">error</span></a>, either in your robot setup, analysis settings, or your test procedure.</p>
</div>
<div class="section" id="acceleration-velocity-plot">
<h3>Acceleration-Velocity Plot<a class="headerlink" href="#acceleration-velocity-plot" title="Permalink to this headline"></a></h3>
<p>The acceleration-versus-velocity plot displays the mechanism velocity versus the portion of acceleration corresponding to factors other than friction (ideally, this would leave only back-EMF) and applied voltage across <em>all</em> of the tests.</p>
<picture><source sizes="min(min(1575px, 100vw), 1000px)" srcset="../../../../_images/accel-vs-vel-plot-500.webp 500w, ../../../../_images/accel-vs-vel-plot-800.webp 800w, ../../../../_images/accel-vs-vel-plot-1100.webp 1100w, ../../../../_images/accel-vs-vel-plot-1400.webp 1400w, ../../../../_images/accel-vs-vel-plot.webp 1575w" type="image/webp"/><img alt="Voltage domain plots picture" decoding="async" height="735" loading="lazy" sizes="min(min(1575px, 100vw), 1000px)" src="../../../../_images/accel-vs-vel-plot.png" srcset="../../../../_images/accel-vs-vel-plot-500.png 500w, ../../../../_images/accel-vs-vel-plot-800.png 800w, ../../../../_images/accel-vs-vel-plot-1100.png 1100w, ../../../../_images/accel-vs-vel-plot-1400.png 1400w, ../../../../_images/accel-vs-vel-plot.png 1575w" width="1575"/></picture><p>This plot should be quite linear, with patches of relatively noiseless quasistatic data intermixed with quite-noisy dynamic data. The noise on the dynamic sections of the plot may be reduced by increasing the <span class="guilabel">Window Size</span> setting.</p>
<picture><source sizes="min(min(1575px, 100vw), 1000px)" srcset="../../../../_images/window-size-selector-500.webp 500w, ../../../../_images/window-size-selector-800.webp 800w, ../../../../_images/window-size-selector-1100.webp 1100w, ../../../../_images/window-size-selector-1400.webp 1400w, ../../../../_images/window-size-selector.webp 1575w" type="image/webp"/><img alt="Picture of the window size selector" decoding="async" height="735" loading="lazy" sizes="min(min(1575px, 100vw), 1000px)" src="../../../../_images/window-size-selector.png" srcset="../../../../_images/window-size-selector-500.png 500w, ../../../../_images/window-size-selector-800.png 800w, ../../../../_images/window-size-selector-1100.png 1100w, ../../../../_images/window-size-selector-1400.png 1400w, ../../../../_images/window-size-selector.png 1575w" width="1575"/></picture><p>However, if your robot or mechanism has low mass compared to the motor power, this may “eat” what little meaningful acceleration data you have.  In these cases <code class="docutils literal notranslate"><span class="pre">kA</span></code> will tend towards zero and can be ignored for feedforward purposes.  However, if <code class="docutils literal notranslate"><span class="pre">kA</span></code> cannot be accurately measured, the calculated feedback gains are likely to be inaccurate, and manual tuning may be required.</p>
</div>
</div>
<div class="section" id="common-failure-modes">
<h2>Common Failure Modes<a class="headerlink" href="#common-failure-modes" title="Permalink to this headline"></a></h2>
<p>When something has gone wrong with the identification, diagnostic plots and console output provide crucial clues as to <em>what</em> has gone wrong.  This section describes some common failures encountered while running the system identification tool, the identifying features of their diagnostic plots, and the steps that can be taken to fix them.</p>
<div class="section" id="improperly-set-motion-threshold">
<h3>Improperly Set Motion Threshold<a class="headerlink" href="#improperly-set-motion-threshold" title="Permalink to this headline"></a></h3>
<p>One of the most-common errors is an inappropriate value for the motion threshold.</p>
<picture><source sizes="min(min(1575px, 100vw), 1000px)" srcset="../../../../_images/motionthreshold-selector-500.webp 500w, ../../../../_images/motionthreshold-selector-800.webp 800w, ../../../../_images/motionthreshold-selector-1100.webp 1100w, ../../../../_images/motionthreshold-selector-1400.webp 1400w, ../../../../_images/motionthreshold-selector.webp 1575w" type="image/webp"/><img alt="Motion threshold selector" decoding="async" height="735" loading="lazy" sizes="min(min(1575px, 100vw), 1000px)" src="../../../../_images/motionthreshold-selector.png" srcset="../../../../_images/motionthreshold-selector-500.png 500w, ../../../../_images/motionthreshold-selector-800.png 800w, ../../../../_images/motionthreshold-selector-1100.png 1100w, ../../../../_images/motionthreshold-selector-1400.png 1400w, ../../../../_images/motionthreshold-selector.png 1575w" width="1575"/></picture><div class="section" id="velocity-threshold-too-low">
<h4>Velocity Threshold Too Low<a class="headerlink" href="#velocity-threshold-too-low" title="Permalink to this headline"></a></h4>
<picture><source sizes="min(min(310px, 100vw), 1000px)" srcset="../../../../_images/low-threshold.webp 310w" type="image/webp"/><img alt="Quasistatic time-domain plot with velocity threshold too low" decoding="async" height="268" loading="lazy" sizes="min(min(310px, 100vw), 1000px)" src="../../../../_images/low-threshold.png" srcset="../../../../_images/low-threshold.png 310w" width="310"/></picture><p>The presence of a “leading tail” (emphasized by added red circle) in the quasistatic time-domain plot indicates that the <span class="guilabel">Velocity Threshold</span> setting is too low, and thus data points from before the robot begins to move are being included.</p>
<p>To solve this, increase the velocity threshold and re-analyze the data.</p>
</div>
<div class="section" id="motion-threshold-too-high">
<h4>Motion Threshold Too High<a class="headerlink" href="#motion-threshold-too-high" title="Permalink to this headline"></a></h4>
<picture><source sizes="min(min(314px, 100vw), 1000px)" srcset="../../../../_images/high-threshold.webp 314w" type="image/webp"/><img alt="Quasistatic time-domain plot with velocity threshold too high" decoding="async" height="267" loading="lazy" sizes="min(min(314px, 100vw), 1000px)" src="../../../../_images/high-threshold.png" srcset="../../../../_images/high-threshold.png 314w" width="314"/></picture><p>While not nearly as problematic as a too-low threshold, a velocity threshold that is too high will result in a large “gap” in the acceleration-versus-velocity plot.</p>
<p>To solve this, decrease the velocity threshold and re-analyze the data.</p>
</div>
</div>
<div class="section" id="noisy-velocity-signals">
<h3>Noisy Velocity Signals<a class="headerlink" href="#noisy-velocity-signals" title="Permalink to this headline"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are two types of noise that affect mechanical systems - signal noise and system noise.  Signal noise corresponds to measurement error, while system noise corresponds to actual physical motion that is unaccounted-for by your model (e.g. vibration).  If SysId suggests that your system is noisy, you must figure out which of the two types of noise is at play - signal noise is often easier to eliminate than system noise.</p>
</div>
<picture><source sizes="min(min(312px, 100vw), 1000px)" srcset="../../../../_images/velo-noise.webp 312w" type="image/webp"/><img alt="../../../../_images/velo-noise.png" decoding="async" height="268" loading="lazy" sizes="min(min(312px, 100vw), 1000px)" src="../../../../_images/velo-noise.png" srcset="../../../../_images/velo-noise.png 312w" width="312"/></picture><p>Many FRC setups suffer from poorly-installed encoders - errors in shaft concentricity (for optical encoders) and magnet location (For magnetic encoders) can both contribute to noisy velocity signals, as can inappropriate filtering settings.  Encoder noise will be immediately visible in your diagnostic plots, as can be seen above.  Encoder noise is especially common on the <a class="reference external" href="https://www.andymark.com/products/toughbox-mini-options">toughbox mini</a> gearboxes provided in the kit of parts.</p>
<p>System parameters can sometimes be accurately determined even from data polluted by encoder noise by increasing the window size setting.  However, this sort of encoder noise is problematic for robot code much the same way it is problematic for the system identification tool.  As the root cause of the noise is not known, it is recommended to try a different encoder setup if this is observed, either by moving the encoders to a different shaft, replacing them with a different type of encoder, or increasing the sample per average in project generation (adds an additional layer of filtering).</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="analyzing-data.html" class="btn btn-neutral float-left" title="Analyzing Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="analyzing-feedback.html" class="btn btn-neutral float-right" title="Feedback Analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, FIRST and other WPILib Contributors.
      <span class="commit">Revision <code>30e056cb</code>.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: stable
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/2021/">2021</a></dd>
        
          <dd><a href="/en/2020/">2020</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/stable/pdf/">pdf</a></dd>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/stable/htmlzip/">html</a></dd>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/frc-docs/?fromdocs=frc-docs">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/frc-docs/?fromdocs=frc-docs">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>
  <script>
    if (typeof READTHEDOCS_DATA !== 'undefined') {
        if (!READTHEDOCS_DATA.features) {
          READTHEDOCS_DATA.features = {};
        }
        READTHEDOCS_DATA.features.docsearch_disabled = false;
      }
    </script>

</body>
</html>