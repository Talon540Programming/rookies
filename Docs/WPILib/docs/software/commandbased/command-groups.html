<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta property="og:title" content="Command Groups" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://docs.wpilib.org/en/stable/docs/software/commandbased/command-groups.html" />
  <meta property="og:site_name" content="FIRST Robotics Competition Documentation" />
  <meta property="og:description" content="Individual commands are capable of accomplishing a large variety of robot tasks, but the simple three-state format can quickly become cumbersome when more advanced functionality requiring extended ..." />
  <meta property="og:image" content="https://raw.githubusercontent.com/wpilibsuite/branding/main/png/wpilib-128.png" />
  <meta property="og:image:alt" content="FIRST Robotics Competition Documentation" />
  <meta property="og:ignore_canonical" content="true" />
<meta name="theme-color" content="#003974" />
<meta name="google-site-verification" content="xcmdxM0KzMYiAOeJzyF_l2Tn3AHGzPICs9_vX6q2nwM" />
<link rel="alternate" hreflang="en" href="https://docs.wpilib.org/en/stable/docs/software/commandbased/command-groups.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.wpilib.org/en/stable/docs/software/commandbased/command-groups.html" />
<link rel="alternate" hreflang="es" href="https://docs.wpilib.org/es/stable/docs/software/commandbased/command-groups.html" />
<link rel="alternate" hreflang="fr" href="https://docs.wpilib.org/fr/stable/docs/software/commandbased/command-groups.html" />
<link rel="alternate" hreflang="he" href="https://docs.wpilib.org/he/stable/docs/software/commandbased/command-groups.html" />
<link rel="alternate" hreflang="pt" href="https://docs.wpilib.org/pt/stable/docs/software/commandbased/command-groups.html" />
<link rel="alternate" hreflang="tr" href="https://docs.wpilib.org/tr/stable/docs/software/commandbased/command-groups.html" />
<link rel="alternate" hreflang="zh-CN" href="https://docs.wpilib.org/zh_CN/stable/docs/software/commandbased/command-groups.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Command Groups &mdash; FIRST Robotics Competition  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster.custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster.bundle.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-shadow.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-punk.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-noir.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-light.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-borderless.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/micromodal.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/frc-rtd.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/sphinx_rtd_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/FIRSTicon_RGB_withTM.ico"/>
    <link rel="canonical" href="https://docs.wpilib.org/en/stable/docs/software/commandbased/command-groups.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script async="async" src="../../../_static/js/present.js"></script>
        <script src="../../../_static/js/hoverxref.js"></script>
        <script src="../../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../../_static/js/micromodal.min.js"></script>
        <script src="../../../_static/js/versionwarning.js"></script>
        <script src="../../../_static/js/api-docs-redirect.js"></script>
        <script src="../../../_static/js/fix-rtd-menu-ios.js"></script>
        <script src="../../../_static/js/external-links-new-tab.js"></script>
        <script src="../../../_static/js/version-2014.js"></script>
        <script src="../../../_static/tabs.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="The Command Scheduler" href="command-scheduler.html" />
    <link rel="prev" title="Commands" href="commands.html" /> 
</head>

<body class="wy-body-for-nav"> 


<div class="header-bar">
        <!-- Color Strip -->
        <div class="color-strip">
            <div class="fred"></div>
            <div class="forange"></div>
            <div class="fblue"></div>
        </div>
        <div class="link-bar-container">
            <div id="link-bar" class="collapse">
                <ul>          
                  <li id="manual-link"><a href="https://www.firstinspires.org/resource-library/frc/competition-manual-qa-system">FRC Game Manual</a></li>
                  <li id="qa-link"><a href="https://frc-qa.firstinspires.org/">FRC Game Q&A</a></li>
                </ul>
            </div>
        </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> FIRST Robotics Competition
            <img src="../../../_static/wpilibDocsLogo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                stable
              </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Zero to Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-1/index.html">Step 1: Building your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-2/index.html">Step 2: Installing Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-3/index.html">Step 3: Preparing Your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-4/index.html">Step 4: Programming your Robot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Control System Overviews</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../controls-overviews/control-system-hardware.html">Hardware Component Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controls-overviews/control-system-software.html">Software Component Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../what-is-wpilib.html">What is WPILib?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../yearly-overview/index.html">2022 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vscode-overview/index.html">VS Code Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboards/index.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labview/index.html">FRC LabVIEW Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware-apis/index.html">Hardware APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../can-devices/index.html">CAN Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic-programming/index.html">Basic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/support-resources.html">Support Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frc-glossary.html">FRC Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/index.html">WPILib Java API Docs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/cpp/index.html">WPILib C++ API Docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driverstation/index.html">Driver Station</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/robotbuilder/index.html">RobotBuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/robot-simulation/index.html">Robot Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/outlineviewer/index.html">OutlineViewer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/axon/index.html">Axon</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Programming</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../vision-processing/index.html">Vision Processing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Command-Based Programming</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="command-based-changes.html">2020 Command-Based Rewrite: What Changed?</a></li>
<li class="toctree-l2"><a class="reference internal" href="what-is-command-based.html">What Is “Command-Based” Programming?</a></li>
<li class="toctree-l2"><a class="reference internal" href="what-is-command-based.html#creating-a-robot-project">Creating a Robot Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="subsystems.html">Subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.html">Commands</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Command Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="command-scheduler.html">The Command Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="binding-commands-to-triggers.html">Binding Commands to Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="structuring-command-based-project.html">Structuring a Command-Based Robot Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="convenience-features.html">Convenience Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="pid-subsystems-commands.html">PID Control through PIDSubsystems and PIDCommands</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile-subsystems-commands.html">Motion Profiling through TrapezoidProfileSubsystems and TrapezoidProfileCommands</a></li>
<li class="toctree-l2"><a class="reference internal" href="profilepid-subsystems-commands.html">Combining Motion Profiling and PID in Command-Based</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp-command-discussion.html">A Technical Discussion on C++ Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kinematics-and-odometry/index.html">Kinematics and Odometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networktables/index.html">NetworkTables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pathplanning/index.html">Path Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roborio-info/index.html">roboRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-gradlerio/index.html">Advanced GradleRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-controls/index.html">Advanced Controls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../convenience-features/index.html">Convenience Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples and Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples-tutorials/wpilib-examples.html">WPILib Example Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples-tutorials/third-party-examples.html">Third Party Example Projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/hardware-basics/index.html">Hardware - Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/hardware-tutorials/index.html">Hardware Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/sensors/index.html">Sensors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Romi Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../romi-robot/index.html">Getting Started with Romi</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Robot Networking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../networking/networking-introduction/index.html">Networking Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/networking-utilities/index.html">Networking Utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/frc-docs/index.html">Contributing to frc-docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/wpilib/index.html">Developing with allwpilib</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/wpilibsuite/frc-docs/issues">Report an Issue</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">FIRST Robotics Competition</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Command-Based Programming</a> &raquo;</li>
      <li>Command Groups</li>
<li class="wy-breadcrumbs-aside" style="padding-inline-start: 6px;">
    <a href="?present" class="btn" style="background-color: #2980b9; color: white; padding: 5px">
        Present
        <span class="fa fa-expand"></span>
    </a>
</li>

      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/wpilibsuite/frc-docs/blob/stable/source/docs/software/commandbased/command-groups.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="command-groups">
<h1>Command Groups<a class="headerlink" href="#command-groups" title="Permalink to this headline"></a></h1>
<p>Individual commands are capable of accomplishing a large variety of robot tasks, but the simple three-state format can quickly become cumbersome when more advanced functionality requiring extended sequences of robot tasks or coordination of multiple robot subsystems is required. In order to accomplish this, users are encouraged to use the powerful command group functionality included in the command-based library.</p>
<p>As the name suggests, command groups are combinations of multiple commands. The act of combining multiple objects (such as commands) into a bigger object is known as <a class="reference external" href="https://en.wikipedia.org/wiki/Object_composition">composition</a>. Command groups <em>compose</em> multiple commands into a <em>composite</em> command. This allows code to be kept much cleaner and simpler, as the individual <em>component</em> commands may be written independently of the code that combines them, greatly reducing the amount of complexity at any given step of the process.</p>
<p>Most importantly, however, command groups <em>are themselves commands</em> - they implement the <code class="docutils literal notranslate"><span class="pre">Command</span></code> interface. This allows command groups to be <a class="reference external" href="https://en.wikipedia.org/wiki/Object_composition#Recursive_composition">recursively composed</a> - that is, a command group may contain <em>other command groups</em> as components.</p>
<div class="section" id="types-of-command-groups">
<h2>Types of Command Groups<a class="headerlink" href="#types-of-command-groups" title="Permalink to this headline"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the C++ command-based library, command groups <em>own</em> their component commands.  This means that commands passed to command groups will be either moved or copied depending on whether they are rvalues or lvalues (<a class="reference external" href="http://thbecker.net/articles/rvalue_references/section_01.html">rvalue/lvalue explanation</a>).  Due to certain technical concerns, command groups themselves are not copyable, and so recursive composition <em>must</em> use move semantics.</p>
</div>
<p>The command-based library supports four basic types of command groups: <code class="docutils literal notranslate"><span class="pre">SequentialCommandGroup</span></code>, <code class="docutils literal notranslate"><span class="pre">ParallelCommandGroup</span></code>, <code class="docutils literal notranslate"><span class="pre">ParallelRaceGroup</span></code>, and <code class="docutils literal notranslate"><span class="pre">ParallelDeadlineGroup</span></code>. Each of these command groups combines multiple commands into a composite command - however, they do so in different ways:</p>
<div class="section" id="sequentialcommandgroup">
<h3>SequentialCommandGroup<a class="headerlink" href="#sequentialcommandgroup" title="Permalink to this headline"></a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">SequentialCommandGroup</span></code> (<a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/SequentialCommandGroup.html">Java</a>, <a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/cpp/classfrc2_1_1_sequential_command_group.html">C++</a>) runs a list of commands in sequence - the first command will be executed, then the second, then the third, and so on until the list finishes. The sequential group finishes after the last command in the sequence finishes. It is therefore usually important to ensure that each command in the sequence does actually finish (if a given command does not finish, the next command will never start!).</p>
</div>
<div class="section" id="parallelcommandgroup">
<h3>ParallelCommandGroup<a class="headerlink" href="#parallelcommandgroup" title="Permalink to this headline"></a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">ParallelCommandGroup</span></code> (<a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/ParallelCommandGroup.html">Java</a>, <a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/cpp/classfrc2_1_1_parallel_command_group.html">C++</a>) runs a set of commands concurrently - all commands will execute at the same time. The parallel group will end when all commands have finished.</p>
</div>
<div class="section" id="parallelracegroup">
<h3>ParallelRaceGroup<a class="headerlink" href="#parallelracegroup" title="Permalink to this headline"></a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">ParallelRaceGroup</span></code> (<a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/ParallelRaceGroup.html">Java</a>, <a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/cpp/classfrc2_1_1_parallel_race_group.html">C++</a>) is much like a <code class="docutils literal notranslate"><span class="pre">ParallelCommandgroup</span></code>, in that it runs a set of commands concurrently. However, the race group ends as soon as any command in the group ends - all other commands are interrupted at that point.</p>
</div>
<div class="section" id="paralleldeadlinegroup">
<h3>ParallelDeadlineGroup<a class="headerlink" href="#paralleldeadlinegroup" title="Permalink to this headline"></a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">ParallelDeadlineGroup</span></code> (<a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/ParallelDeadlineGroup.html">Java</a>, <a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/cpp/classfrc2_1_1_parallel_deadline_group.html">C++</a>) also runs a set of commands concurrently. However, the deadline group ends when a <em>specific</em> command (the “deadline”) ends, interrupting all other commands in the group that are still running at that point.</p>
</div>
</div>
<div class="section" id="creating-command-groups">
<h2>Creating Command Groups<a class="headerlink" href="#creating-command-groups" title="Permalink to this headline"></a></h2>
<p>Users have several options for creating command groups. One way - similar to the previous implementation of the command-based library - is to subclass one of the command group classes. Consider the following from the Hatch Bot example project (<a class="reference external" href="https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/hatchbottraditional">Java</a>, <a class="reference external" href="https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/HatchbotTraditional">C++</a>):</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-SmF2YQ==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-SmF2YQ==" name="SmF2YQ==" role="tab" tabindex="0">Java</button><button aria-controls="panel-0-QysrIChIZWFkZXIp" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-QysrIChIZWFkZXIp" name="QysrIChIZWFkZXIp" role="tab" tabindex="-1">C++ (Header)</button><button aria-controls="panel-0-QysrIChTb3VyY2Up" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tab" tabindex="-1">C++ (Source)</button></div><div aria-labelledby="tab-0-SmF2YQ==" class="sphinx-tabs-panel group-tab" id="panel-0-SmF2YQ==" name="SmF2YQ==" role="tabpanel" tabindex="0"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 5</span><span class="kn">package</span> <span class="nn">edu.wpi.first.wpilibj.examples.hatchbottraditional.commands</span><span class="p">;</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="kn">import</span> <span class="nn">edu.wpi.first.wpilibj.examples.hatchbottraditional.Constants.AutoConstants</span><span class="p">;</span>
<span class="linenos"> 8</span><span class="kn">import</span> <span class="nn">edu.wpi.first.wpilibj.examples.hatchbottraditional.subsystems.DriveSubsystem</span><span class="p">;</span>
<span class="linenos"> 9</span><span class="kn">import</span> <span class="nn">edu.wpi.first.wpilibj.examples.hatchbottraditional.subsystems.HatchSubsystem</span><span class="p">;</span>
<span class="linenos">10</span><span class="kn">import</span> <span class="nn">edu.wpi.first.wpilibj2.command.SequentialCommandGroup</span><span class="p">;</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="cm">/** A complex auto command that drives forward, releases a hatch, and then drives backward. */</span>
<span class="linenos">13</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ComplexAuto</span> <span class="kd">extends</span> <span class="n">SequentialCommandGroup</span> <span class="p">{</span>
<span class="linenos">14</span>  <span class="cm">/**</span>
<span class="linenos">15</span><span class="cm">   * Creates a new ComplexAuto.</span>
<span class="linenos">16</span><span class="cm">   *</span>
<span class="linenos">17</span><span class="cm">   * @param drive The drive subsystem this command will run on</span>
<span class="linenos">18</span><span class="cm">   * @param hatch The hatch subsystem this command will run on</span>
<span class="linenos">19</span><span class="cm">   */</span>
<span class="linenos">20</span>  <span class="kd">public</span> <span class="nf">ComplexAuto</span><span class="p">(</span><span class="n">DriveSubsystem</span> <span class="n">drive</span><span class="p">,</span> <span class="n">HatchSubsystem</span> <span class="n">hatch</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">21</span>    <span class="n">addCommands</span><span class="p">(</span>
<span class="linenos">22</span>        <span class="c1">// Drive forward the specified distance</span>
<span class="linenos">23</span>        <span class="k">new</span> <span class="n">DriveDistance</span><span class="p">(</span>
<span class="linenos">24</span>            <span class="n">AutoConstants</span><span class="p">.</span><span class="na">kAutoDriveDistanceInches</span><span class="p">,</span> <span class="n">AutoConstants</span><span class="p">.</span><span class="na">kAutoDriveSpeed</span><span class="p">,</span> <span class="n">drive</span><span class="p">),</span>
<span class="linenos">25</span>
<span class="linenos">26</span>        <span class="c1">// Release the hatch</span>
<span class="linenos">27</span>        <span class="k">new</span> <span class="n">ReleaseHatch</span><span class="p">(</span><span class="n">hatch</span><span class="p">),</span>
<span class="linenos">28</span>
<span class="linenos">29</span>        <span class="c1">// Drive backward the specified distance</span>
<span class="linenos">30</span>        <span class="k">new</span> <span class="n">DriveDistance</span><span class="p">(</span>
<span class="linenos">31</span>            <span class="n">AutoConstants</span><span class="p">.</span><span class="na">kAutoBackupDistanceInches</span><span class="p">,</span> <span class="o">-</span><span class="n">AutoConstants</span><span class="p">.</span><span class="na">kAutoDriveSpeed</span><span class="p">,</span> <span class="n">drive</span><span class="p">));</span>
<span class="linenos">32</span>  <span class="p">}</span>
<span class="linenos">33</span><span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-QysrIChIZWFkZXIp" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-QysrIChIZWFkZXIp" name="QysrIChIZWFkZXIp" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 5</span><span class="cp">#pragma once</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;frc2/command/CommandHelper.h&gt;</span><span class="cp"></span>
<span class="linenos"> 8</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;frc2/command/SequentialCommandGroup.h&gt;</span><span class="cp"></span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Constants.h&quot;</span><span class="cp"></span>
<span class="linenos">11</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;commands/DriveDistance.h&quot;</span><span class="cp"></span>
<span class="linenos">12</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;commands/ReleaseHatch.h&quot;</span><span class="cp"></span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="cm">/**</span>
<span class="linenos">15</span><span class="cm"> * A complex auto command that drives forward, releases a hatch, and then drives</span>
<span class="linenos">16</span><span class="cm"> * backward.</span>
<span class="linenos">17</span><span class="cm"> */</span><span class="w"></span>
<span class="linenos">18</span><span class="k">class</span><span class="w"> </span><span class="nc">ComplexAuto</span><span class="w"></span>
<span class="linenos">19</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">frc2</span><span class="o">::</span><span class="n">CommandHelper</span><span class="o">&lt;</span><span class="n">frc2</span><span class="o">::</span><span class="n">SequentialCommandGroup</span><span class="p">,</span><span class="w"> </span><span class="n">ComplexAuto</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">20</span><span class="w"> </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="linenos">21</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos">22</span><span class="cm">   * Creates a new ComplexAuto.</span>
<span class="linenos">23</span><span class="cm">   *</span>
<span class="linenos">24</span><span class="cm">   * @param drive The drive subsystem this command will run on</span>
<span class="linenos">25</span><span class="cm">   * @param hatch The hatch subsystem this command will run on</span>
<span class="linenos">26</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos">27</span><span class="w">  </span><span class="n">ComplexAuto</span><span class="p">(</span><span class="n">DriveSubsystem</span><span class="o">*</span><span class="w"> </span><span class="n">drive</span><span class="p">,</span><span class="w"> </span><span class="n">HatchSubsystem</span><span class="o">*</span><span class="w"> </span><span class="n">hatch</span><span class="p">);</span><span class="w"></span>
<span class="linenos">28</span><span class="p">};</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-QysrIChTb3VyY2Up" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 5</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;commands/ComplexAuto.h&quot;</span><span class="cp"></span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">AutoConstants</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="n">ComplexAuto</span><span class="o">::</span><span class="n">ComplexAuto</span><span class="p">(</span><span class="n">DriveSubsystem</span><span class="o">*</span><span class="w"> </span><span class="n">drive</span><span class="p">,</span><span class="w"> </span><span class="n">HatchSubsystem</span><span class="o">*</span><span class="w"> </span><span class="n">hatch</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">10</span><span class="w">  </span><span class="n">AddCommands</span><span class="p">(</span><span class="w"></span>
<span class="linenos">11</span><span class="w">      </span><span class="c1">// Drive forward the specified distance</span>
<span class="linenos">12</span><span class="w">      </span><span class="n">DriveDistance</span><span class="p">(</span><span class="n">kAutoDriveDistanceInches</span><span class="p">,</span><span class="w"> </span><span class="n">kAutoDriveSpeed</span><span class="p">,</span><span class="w"> </span><span class="n">drive</span><span class="p">),</span><span class="w"></span>
<span class="linenos">13</span><span class="w">      </span><span class="c1">// Release the hatch</span>
<span class="linenos">14</span><span class="w">      </span><span class="n">ReleaseHatch</span><span class="p">(</span><span class="n">hatch</span><span class="p">),</span><span class="w"></span>
<span class="linenos">15</span><span class="w">      </span><span class="c1">// Drive backward the specified distance</span>
<span class="linenos">16</span><span class="w">      </span><span class="n">DriveDistance</span><span class="p">(</span><span class="n">kAutoBackupDistanceInches</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">kAutoDriveSpeed</span><span class="p">,</span><span class="w"> </span><span class="n">drive</span><span class="p">));</span><span class="w"></span>
<span class="linenos">17</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div></div>
<p>The <code class="docutils literal notranslate"><span class="pre">addCommands()</span></code> method adds commands to the group, and is present in all four types of command group.</p>
</div>
<div class="section" id="inline-command-groups">
<h2>Inline Command Groups<a class="headerlink" href="#inline-command-groups" title="Permalink to this headline"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Due to the verbosity of Java’s <code class="docutils literal notranslate"><span class="pre">new</span></code> syntax, the Java <code class="docutils literal notranslate"><span class="pre">CommandGroupBase</span></code> object offers a factory method for each of the four command-group types: <a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/CommandGroupBase.html#sequence(edu.wpi.first.wpilibj2.command.Command...)">sequence</a>, <a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/CommandGroupBase.html#parallel(edu.wpi.first.wpilibj2.command.Command...)">parallel</a>, <a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/CommandGroupBase.html#race(edu.wpi.first.wpilibj2.command.Command...)">race</a>, and <a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/CommandGroupBase.html#deadline(edu.wpi.first.wpilibj2.command.Command,edu.wpi.first.wpilibj2.command.Command...)">deadline</a>.</p>
</div>
<p>Command groups can be used without subclassing at all: one can simply pass in the desired commands through the constructor:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-SmF2YQ==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-SmF2YQ==" name="SmF2YQ==" role="tab" tabindex="0">Java</button><button aria-controls="panel-1-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-1-SmF2YQ==" class="sphinx-tabs-panel code-tab group-tab" id="panel-1-SmF2YQ==" name="SmF2YQ==" role="tabpanel" tabindex="0"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">new</span> <span class="n">SequentialCommandGroup</span><span class="p">(</span><span class="k">new</span> <span class="n">FooCommand</span><span class="p">(),</span> <span class="k">new</span> <span class="n">BarCommand</span><span class="p">());</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-1-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">frc2</span><span class="o">::</span><span class="n">SequentialCommandGroup</span><span class="p">{</span><span class="n">FooCommand</span><span class="p">(),</span><span class="w"> </span><span class="n">BarCommand</span><span class="p">()};</span><span class="w"></span>
</pre></div>
</div>
</div></div>
<p>This is called an <a class="reference internal" href="convenience-features.html#inline-command-definitions"><span class="std std-ref">inline</span></a> command definition, and is very handy for circumstances where command groups are not likely to be reused, and writing an entire class for them would be wasteful.</p>
</div>
<div class="section" id="recursive-composition-of-command-groups">
<h2>Recursive Composition of Command Groups<a class="headerlink" href="#recursive-composition-of-command-groups" title="Permalink to this headline"></a></h2>
<p>As mentioned earlier, command groups are <a class="reference external" href="https://en.wikipedia.org/wiki/Object_composition#Recursive_composition">recursively composable</a> - since command groups are themselves commands, they may be included as components of other command groups. This is an extremely powerful feature of command groups, and allows users to build very complex robot actions from simple pieces. For example, consider the following code:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-SmF2YQ==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-SmF2YQ==" name="SmF2YQ==" role="tab" tabindex="0">Java</button><button aria-controls="panel-2-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-2-SmF2YQ==" class="sphinx-tabs-panel code-tab group-tab" id="panel-2-SmF2YQ==" name="SmF2YQ==" role="tabpanel" tabindex="0"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">new</span> <span class="n">SequentialCommandGroup</span><span class="p">(</span>
   <span class="k">new</span> <span class="n">DriveToGoal</span><span class="p">(</span><span class="n">m_drive</span><span class="p">),</span>
   <span class="k">new</span> <span class="n">ParallelCommandGroup</span><span class="p">(</span>
      <span class="k">new</span> <span class="n">RaiseElevator</span><span class="p">(</span><span class="n">m_elevator</span><span class="p">),</span>
      <span class="k">new</span> <span class="n">SetWristPosition</span><span class="p">(</span><span class="n">m_wrist</span><span class="p">)),</span>
   <span class="k">new</span> <span class="n">ScoreTube</span><span class="p">(</span><span class="n">m_wrist</span><span class="p">));</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-2-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;frc2/command/SequentialCommandGroup.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;frc2/command/ParallelCommandGroup.h&gt;</span><span class="cp"></span>

<span class="p">...</span><span class="w"></span>

<span class="n">frc2</span><span class="o">::</span><span class="n">SequentialCommandGroup</span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">DriveToGoal</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_drive</span><span class="p">),</span><span class="w"></span>
<span class="w">   </span><span class="n">frc2</span><span class="o">::</span><span class="n">ParallelCommandGroup</span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">RaiseElevator</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_elevator</span><span class="p">),</span><span class="w"></span>
<span class="w">      </span><span class="n">SetWristPosition</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_wrist</span><span class="p">)},</span><span class="w"></span>
<span class="w">   </span><span class="n">ScoreTube</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_wrist</span><span class="p">)};</span><span class="w"></span>
</pre></div>
</div>
</div></div>
<p>This creates a sequential command group that <em>contains</em> a parallel command group. The resulting control flow looks something like this:</p>
<picture><img alt="command group with concurrency" decoding="async" height="444" loading="lazy" src="../../../_images/concurrent-commands.drawio.svg" width="1000"/></picture><p>Notice how the recursive composition allows the embedding of a parallel control structure within a sequential one. Notice also that this entire, more-complex structure, could be again embedded in another structure. Composition is an extremely powerful tool, and one that users should be sure to use extensively.</p>
</div>
<div class="section" id="command-groups-and-requirements">
<h2>Command Groups and Requirements<a class="headerlink" href="#command-groups-and-requirements" title="Permalink to this headline"></a></h2>
<p>As command groups are commands, they also must declare their requirements. However, users are not required to specify requirements manually for command groups - requirements are automatically inferred from the commands included. As a rule, <em>command groups include the union of all of the subsystems required by their component commands.</em> Thus, the <code class="docutils literal notranslate"><span class="pre">ComplexAuto</span></code> shown previously will require both the drive subsystem and the hatch subsystem of the robot.</p>
<p>Additionally, requirements are enforced within all three types of parallel groups - a parallel group may <em>not</em> contain multiple commands that require the same subsystem.</p>
<p>Some advanced users may find this overly-restrictive - for said users, the library offers a <code class="docutils literal notranslate"><span class="pre">ScheduleCommand</span></code> class (<a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/ScheduleCommand.html">Java</a>, <a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/cpp/classfrc2_1_1_schedule_command.html">C++</a>) that can be used to independently “branch off” from command groups to provide finer granularity in requirement management.</p>
</div>
<div class="section" id="restrictions-on-command-group-components">
<h2>Restrictions on Command Group Components<a class="headerlink" href="#restrictions-on-command-group-components" title="Permalink to this headline"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following is only relevant for the Java command-based library; the C++ library’s ownership model naturally prevents users from making this category of mistake.</p>
</div>
<p>Since command group components are run through their encapsulating command groups, errors could occur if those same command instances were independently scheduled at the same time as the group - the command would be being run from multiple places at once, and thus could end up with inconsistent internal state, causing unexpected and hard-to-diagnose behavior.</p>
<p>For this reason, command instances that have been added to a command group cannot be independently scheduled or added to a second command group. Attempting to do so will throw an exception and crash the user program.</p>
<p>Advanced users who wish to re-use a command instance and are <em>certain</em> that it is safe to do so may bypass this restriction with the <code class="docutils literal notranslate"><span class="pre">clearGroupedCommand()</span></code> <a class="reference external" href="https://first.wpi.edu/wpilib/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/CommandGroupBase.html#clearGroupedCommand(edu.wpi.first.wpilibj2.command.Command)">method</a> in the <code class="docutils literal notranslate"><span class="pre">CommandGroupBase</span></code> class.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="commands.html" class="btn btn-neutral float-left" title="Commands" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="command-scheduler.html" class="btn btn-neutral float-right" title="The Command Scheduler" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, FIRST and other WPILib Contributors.
      <span class="commit">Revision <code>30e056cb</code>.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: stable
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/2021/">2021</a></dd>
        
          <dd><a href="/en/2020/">2020</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/stable/pdf/">pdf</a></dd>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/stable/htmlzip/">html</a></dd>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/frc-docs/?fromdocs=frc-docs">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/frc-docs/?fromdocs=frc-docs">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>
  <script>
    if (typeof READTHEDOCS_DATA !== 'undefined') {
        if (!READTHEDOCS_DATA.features) {
          READTHEDOCS_DATA.features = {};
        }
        READTHEDOCS_DATA.features.docsearch_disabled = false;
      }
    </script>

</body>
</html>